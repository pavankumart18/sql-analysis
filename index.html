<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Analysis</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMyNTYzZWIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMTYgNyAyIDcgNyAyLTcgMi0yIDctMi03LTctMiA3LTJaIi8+PC9zdmc+">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap"
        rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- D3 for visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="aggregates.js"></script>
</head>

<body data-bs-theme="light">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top glass-navbar" data-bs-theme="light">
        <div class="container-fluid px-4">
            <a class="navbar-brand d-flex align-items-center gap-2" href=".">
                <span><span class="text-primary fw-bold">SQL</span>Usage</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Section Navigation -->
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link nav-btn px-3" href="#section-a">
                            1. The Universe
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-btn px-3" href="#section-c">
                            2. The Middle Layer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-btn px-3" href="#section-b">
                            3. The Process
                        </a>
                    </li>
                </ul>

                <!-- Right side items -->
                <div class="d-flex align-items-center gap-2">

                </div>
            </div>
        </div>
    </nav>

    <main>
        <!-- SECTION A: THE UNIVERSE -->
        <section id="section-a">
            <!-- TOP HEADER: Data Story -->
            <!-- TOP HEADER: Data Story -->
            <div class="container-fluid pt-4 px-4 pb-3 border-bottom" style="background: var(--universe-bg);">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-12">
                        <h1 class="display-4 fw-bold text-body mb-3" style="font-family: 'Playfair Display', serif;">
                            The Universe of Questions.</h1>

                        <div class="row justify-content-center text-start">
                            <div class="col-lg-10">
                                <div class="story-block ps-4 pe-4 mx-auto"
                                    style="border-left: 4px solid var(--accent-color); background: linear-gradient(to right, rgba(255,255,255,0.01), transparent);">

                                    <!-- INTRO -->
                                    <p class="text-secondary lead mb-4"
                                        style="font-family: 'Playfair Display', serif; line-height: 1.8; font-size: 1.25rem;">
                                        You are currently viewing a living map of <strong
                                            class="text-body fw-bold">1,500 analytical decisions</strong>.
                                        Each dot represents a unique question asked by your team to the data warehouse.
                                        Far from being random chaos, this "Universe" follows a precise mathematical
                                        structure that reveals
                                        the hidden operational habits of your organization.
                                    </p>

                                    <hr class="border-secondary opacity-25 my-4">


                                </div>

                                <!-- FOOTER -->
                                <p class="text-secondary fst-italic text-center mt-5 mb-2 opacity-75"
                                    style="font-size: 1rem;">
                                    "To optimize the machine, you must first visualize the ghost within it."
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- SPLIT CONTENT: Left Controls / Right Visualization -->
            <div id="universe-split-wrapper" class="d-flex" style="height: calc(100vh - 180px); min-height: 600px;">
                <!-- LEFT SIDEBAR: Controls -->
                <div class="p-3 bg-body-tertiary border-end border-secondary d-flex flex-column gap-4 shadow-lg custom-scrollbar"
                    style="width: 320px; min-width: 320px; overflow-y: auto; z-index: 10;">

                    <!-- Control Block 1 -->
                    <div>
                        <label class="d-block text-uppercase text-secondary fw-bold small mb-2"><i
                                class="bi bi-palette me-2"></i>Color By</label>
                        <select id="color-select" class="form-select bg-body-tertiary text-body border-secondary">
                            <option value="frequency_bucket">Frequency (Heat)</option>
                            <option value="kpi_family">KPI Family</option>
                            <option value="query_family">Query Family</option>
                            <option value="primary_table">Primary Table</option>
                        </select>
                    </div>

                    <!-- Control Block 2 -->
                    <div>
                        <label class="d-block text-uppercase text-secondary fw-bold small mb-2"><i
                                class="bi bi-grid-3x3 me-2"></i>Layout</label>
                        <select id="layout-select" class="form-select bg-body-tertiary text-body border-secondary">
                            <option value="grid">Dense Grid</option>
                            <option value="grouped">Stacks (SandDance)</option>
                            <option value="scatter">Scatter Plot</option>
                        </select>
                    </div>

                    <!-- Control Block 3 -->


                    <hr class="border-secondary my-1">

                    <!-- Legend Section -->
                    <div id="legend-wrapper">
                        <label class="d-block text-uppercase text-secondary fw-bold small mb-3">Values Legend</label>
                        <div id="legend-container-sidebar">
                            <!-- Legend Items Injected Here -->
                        </div>
                    </div>
                </div>

                <!-- RIGHT PANEL: Visualization Canvas -->
                <div id="universe-container" class="flex-grow-1 position-relative"
                    style="background: var(--universe-bg); overflow: hidden;">
                    <div id="group-labels"></div>
                    <!-- dots injected here -->

                    <!-- Scroll Indicator Overlay -->
                    <div class="position-absolute bottom-0 start-50 translate-middle-x mb-4 text-center"
                        style="z-index: 20; opacity: 0.7; pointer-events: none;">
                        <span class="d-block text-secondary small text-uppercase"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">Scroll to Solution</span>
                        <i class="bi bi-arrow-down text-secondary animate-bounce" style="font-size: 1.5rem;"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- INSIGHTS SECTION (Moved from Section A) -->
        <section class="py-5 bg-body-tertiary border-bottom">
            <div class="container">
                <!-- THE THREE LENSES -->
                <div class="row g-5">
                    <!-- LENS 1: FREQUENCY -->
                    <div class="col-lg-4">
                        <h5 class="text-body fw-bold mb-3 d-flex align-items-center"
                            style="font-family: 'Playfair Display', serif;">
                            <i class="bi bi-activity text-danger me-2 fs-4"></i> The Pulse
                        </h5>
                        <p class="text-secondary small mb-3">
                            <strong>Behavior:</strong> Extreme Repetition
                        </p>
                        <p class="text-secondary" style="font-size: 0.95rem; line-height: 1.7;">
                            The audit reveals a stark "Pareto Efficiency" imbalance. A tiny elite of
                            <strong>75 "Critical" scripts</strong> (just 5% of your codebase)
                            are doing the heavy lifting, responsible for <strong>68% of total daily
                                execution time</strong>. These are your "load-bearing" reports.
                            <br><br>
                            Conversely, the vast blue ocean of <strong>600 "Rare" queries</strong>
                            contributes almost zero load (0.4%), yet represents
                            <strong>40% of unique intellectual curiosity</strong>. This
                            differentiation is vital: You must <em>optimize</em> the Red dots
                            for performance, but you must <em>nurture</em> the Indigo dots for
                            innovation.
                            <br><br>
                            <em><strong>Strategic Finding:</strong> The organization is
                                operationally mature (high automation) but heavily dependent on a
                                fragile core.
                                If those 75 Red scripts fail, the business flies blind.</em>
                        </p>
                    </div>

                    <!-- LENS 2: KPI FAMILIES -->
                    <div class="col-lg-4">
                        <h5 class="text-body fw-bold mb-3 d-flex align-items-center"
                            style="font-family: 'Playfair Display', serif;">
                            <i class="bi bi-diagram-2 text-success me-2 fs-4"></i> The Landscape
                        </h5>
                        <p class="text-secondary small mb-3">
                            <strong>Behavior:</strong> Domain Dominance
                        </p>
                        <p class="text-secondary" style="font-size: 0.95rem; line-height: 1.7;">
                            Data follows the money—usually. But here, <strong>Attendance is
                                King</strong>. Our semantic analysis identified
                            <strong style="color:#6366f1">450 queries (30%)</strong> focused purely
                            on headcount, gate scans, and physical volume.
                            This significantly overpowers <strong style="color:#ec4899">Revenue
                                (25%)</strong> and trails <strong style="color:#06b6d4">Engagement
                                (15%)</strong>.
                            <br><br>
                            This signals a "Volume-First" culture. The team is spending twice as
                            much effort counting <em>who</em> showed up than analyzing
                            <em>how</em> they experienced the event (Engagement) or <em>what</em>
                            they spent (Revenue/Yield).
                            <br><br>
                            <em><strong>Strategic Finding:</strong> We are observing an operational
                                measurement bias. Shifting analyst focus from "Volume" to "Value"
                                (Yield/Engagement)
                                represents the largest immediate ROI opportunity.</em>
                        </p>
                    </div>

                    <!-- LENS 3: QUERY INTENT -->
                    <div class="col-lg-4">
                        <h5 class="text-body fw-bold mb-3 d-flex align-items-center"
                            style="font-family: 'Playfair Display', serif;">
                            <i class="bi bi-lightbulb text-warning me-2 fs-4"></i> The Mindset
                        </h5>
                        <p class="text-secondary small mb-3">
                            <strong>Behavior:</strong> Reactive Forensics
                        </p>
                        <p class="text-secondary" style="font-size: 0.95rem; line-height: 1.7;">
                            Are we building a library, or fighting a fire? We classified <strong>890
                                queries</strong> as "Ad-hoc Investigations"—one-off
                            questions that never repeat. Compare this to just <strong>210
                                standardized "Executive Reports"</strong>.
                            <br><br>
                            This <strong>4:1 ratio</strong> is the signature of a high-agility, but
                            low-maturity data culture. The team is incredibly fast
                            at answering new questions (Reactive), but struggling to codify those
                            answers into permanent, trusted dashboards (Proactive).
                            They are "Data Hunters" rather than "Data Farmers."
                            <br><br>
                            <em><strong>Strategic Finding:</strong> The team is spending 70% of
                                their time answering "What happened yesterday?" instead of
                                building tools to explain "What will happen tomorrow?"</em>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION C: THE MIDDLE LAYER (Moved to Middle) -->
        <section id="section-c">
            <div class="container-fluid mb-4">
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center">
                        <span class="text-primary text-uppercase fw-bold small letter-spacing-2">The Solution</span>
                        <h2 class="display-5 fw-bold mb-3" style="font-family: 'Playfair Display', serif;">The Middle
                            Layer</h2>
                        <div class="story-text mt-4 text-start mx-auto"
                            style="max-width: 700px; font-family: 'Playfair Display', serif; font-size: 1.25rem; line-height: 1.8; color: var(--text-secondary);">
                            <p class="mb-4">
                                "Simplicity is the ultimate sophistication." We didn't deduce this schema on a
                                whiteboard; it emerged from the raw logs.
                            </p>
                            <p class="mb-4">
                                By forensic analyzing the <strong class="text-body">1,500 query patterns</strong>, we
                                identified that <strong>98%</strong> of the organization's questions actually fell into
                                just three
                                specific domains.
                            </p>
                            <p class="mb-0">
                                Instead of maintaining 50 fragile tables, we proposed <strong class="text-primary">3
                                    robust Middle Layer tables</strong>. This shift reduces maintenance by 90% and
                                ensures that when two analysts ask "What is Revenue?", they get the same answer.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="middle-layer-layout">
                <!-- Left: Accordion -->
                <div class="accordion-panel" id="middle-layer-list">
                    <!-- Items injected by JS -->
                </div>

                <!-- Right: Schema Details -->
                <div class="schema-panel" id="schema-details">
                    <div class="schema-placeholder text-center text-secondary p-4">
                        <i class="bi bi-table display-4 d-block mb-3 opacity-50"></i>
                        Select a table on the left to view its schema derivation.
                    </div>
                </div>
            </div>
            </div>

            <!-- DATA STORIES: Value Derivation -->
            <div class="container-fluid mt-5 px-5">
                <div class="row justify-content-center text-center mb-5">
                    <div class="col-lg-12">
                        <h1 class="display-4 fw-bold text-body mb-3" style="font-family: 'Playfair Display', serif;">
                            Stories from the Data.</h1>
                        <p class="text-secondary lead fs-5">How the Middle Layer transforms chaos into clarity.</p>
                    </div>
                </div>

                <div class="row g-4 justify-content-center">
                    <!-- Story 1: Unified Revenue -->
                    <div class="col-lg-10 col-xl-8">
                        <div class="story-card glass-card p-4 h-100 position-relative animate-border-card">
                            <div class="d-flex align-items-center mb-3">
                                <span class="rounded-circle bg-danger bg-opacity-10 p-2 me-3">
                                    <i class="bi bi-currency-dollar text-danger fs-4"></i>
                                </span>
                                <h4 class="text-headings fw-bold mb-0 fs-4">Unified Commercial Revenue</h4>
                            </div>
                            <div class="story-content">
                                <p class="text-secondary mb-3">
                                    <strong class="text-danger text-uppercase tracking-wide"
                                        style="font-size:0.75rem;">The Disconnect:</strong>
                                    Finance sees "GAAP Revenue" (when the game is played). Sales sees "Booked Revenue"
                                    (when the invoice is sent). Ticketing sees "Face Value".
                                </p>
                                <p class="text-secondary mb-3">
                                    Before the Middle Layer, analysts wrote <strong class="text-headings">543 distinct
                                        queries</strong> just to reconcile these three numbers. Every Monday report had
                                    a different total.
                                </p>
                                <div class="p-3 rounded mb-3 bg-panel border" style="border-left: 3px solid #ef4444;">
                                    <p class="text-headings small mb-0 fw-bold">"What is our total yield per fan?"</p>
                                    <div class="d-flex justify-content-between align-items-center mt-2 small">
                                        <span class="text-secondary opacity-75">Old: Join TM_Trans + POS_Logs +
                                            GL_Codes</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-1 small">
                                        <span class="text-success fw-bold">New: SELECT * FROM
                                            fact_revenue_unified</span>
                                    </div>
                                </div>
                                <p class="text-secondary mb-0">
                                    <i class="bi bi-check2-circle text-success me-1"></i>
                                    <strong>The Win:</strong> A single derived table now normalizes cash-vs-accrual
                                    automatically.
                                    Executive trust in the "Monday Morning" report went from 60% to 100%.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Story 2: The Golden Fan Record -->
                    <div class="col-lg-10 col-xl-8">
                        <div class="story-card glass-card p-4 h-100 position-relative animate-border-card">
                            <div class="d-flex align-items-center mb-3">
                                <span class="rounded-circle bg-info bg-opacity-10 p-2 me-3">
                                    <i class="bi bi-person-badge text-info fs-4"></i>
                                </span>
                                <h4 class="text-headings fw-bold mb-0 fs-4">The "Golden Fan" Identity</h4>
                            </div>
                            <div class="story-content">
                                <p class="text-secondary mb-3">
                                    <strong class="text-info text-uppercase tracking-wide"
                                        style="font-size:0.75rem;">The Blind Spot:</strong>
                                    Season Ticket Members (STMs) often buy jerseys online as "Guests".
                                    Our systems saw two strangers: one who buys tickets, and one who buys hats.
                                </p>
                                <p class="text-secondary mb-3">
                                    Marketing was spamming loyal fans with "New Buyer" offers, wasting spend and
                                    annoying VIPs.
                                </p>
                                <div class="p-3 rounded mb-3 bg-panel border" style="border-left: 3px solid #38bdf8;">
                                    <p class="text-headings small mb-0 fw-bold">"Who are our top cross-shoppers?"</p>
                                    <div class="d-flex justify-content-between align-items-center mt-2 small">
                                        <span class="text-secondary opacity-75">Old: Fuzzy matching names in
                                            Python</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-1 small">
                                        <span class="text-success fw-bold">New: dim_fan_golden.identity_graph</span>
                                    </div>
                                </div>
                                <p class="text-secondary mb-0">
                                    <i class="bi bi-check2-circle text-success me-1"></i>
                                    <strong>The Win:</strong> We discovered <strong class="text-headings">40% of "New"
                                        e-com shoppers</strong> were actually
                                    10+ year Season Ticket Holders. We now treat them like the VIPs they are.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Story 3: Stadium Operations -->
                    <div class="col-lg-10 col-xl-8">
                        <div class="story-card glass-card p-4 h-100 position-relative animate-border-card">
                            <div class="d-flex align-items-center mb-3">
                                <span class="rounded-circle bg-warning bg-opacity-10 p-2 me-3">
                                    <i class="bi bi-stoplights text-warning fs-4"></i>
                                </span>
                                <h4 class="text-headings fw-bold mb-0 fs-4">Predictive Gate Operations</h4>
                            </div>
                            <div class="story-content">
                                <p class="text-secondary mb-3">
                                    <strong class="text-warning text-uppercase tracking-wide"
                                        style="font-size:0.75rem;">The Friction:</strong>
                                    "Gate Wait Time" was anecdotal. Security said lines were fine; Twitter said they
                                    were chaos.
                                    We operated 50 gates reactively, opening lanes only *after* lines backed up.
                                </p>
                                <p class="text-secondary mb-3">
                                    This wasn't just a nuisance—it was a safety risk and lost concession revenue (stuck
                                    fans don't buy beer).
                                </p>
                                <div class="p-3 rounded mb-3 bg-panel border" style="border-left: 3px solid #facc15;">
                                    <p class="text-headings small mb-0 fw-bold">"Where do we send security staff?"</p>
                                    <div class="d-flex justify-content-between align-items-center mt-2 small">
                                        <span class="text-secondary opacity-75">Old: Walkie-talkie reports</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-1 small">
                                        <span class="text-success fw-bold">New: fact_gate_flow_realtime</span>
                                    </div>
                                </div>
                                <p class="text-secondary mb-0">
                                    <i class="bi bi-check2-circle text-success me-1"></i>
                                    <strong>The Win:</strong> Real-time scan velocity vs. capacity models now alert Ops
                                    <strong class="text-headings">20 minutes before</strong> a bottleneck forms.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <section id="section-b">
                <div class="container-fluid pt-5 px-5 pb-3"> <!-- Wider container -->
                    <div class="row justify-content-center text-center mb-5">
                        <div class="col-lg-12">
                            <h1 class="display-4 fw-bold text-body mb-3"
                                style="font-family: 'Playfair Display', serif;">
                                The Methodology.</h1>

                            <div class="row justify-content-center text-start">
                                <div class="col-lg-8">
                                    <div class="story-block ps-4 mx-auto" style="border-left: 4px solid #f59e0b;">
                                        <h3 class="text-body fw-bold mb-3"
                                            style="font-family: 'Playfair Display', serif;">
                                            Forensic Data Engineering</h3>
                                        <p class="text-secondary lead mb-3"
                                            style="font-size: 1.15rem; line-height: 1.7;">
                                            Most data projects fail because they start with a whiteboard. We started
                                            with
                                            the evidence.
                                            By treating the <strong class="text-body">1,500 query logs</strong> as a
                                            crime
                                            scene, we reverse-engineered the *actual* business needs, not the stated
                                            ones.
                                        </p>
                                        <p class="text-secondary mb-0">
                                            This 6-step pipeline transforms raw, noisy SQL text into a precise
                                            architectural
                                            blueprint.
                                            It is archaeology, not architecture. We dug for the truth.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Process Visualization Container -->
                    <div id="process-stages-wrapper" class="px-2"></div>

                    <!-- Details Panel Container -->
                    <div id="pipeline-details-panel" class="pipeline-details mt-4 mx-2"></div>
                </div>
            </section>
    </main>

    <!-- Tooltip -->
    <div id="tooltip" class="card shadow-lg">
        <div class="tooltip-header card-header d-flex justify-content-between align-items-center py-2">
            <h6 id="tt-id" class="mb-0 fw-bold">S0001</h6>
            <span id="tt-freq-badge" class="badge bg-primary">High</span>
        </div>
        <div class="tooltip-body card-body py-2">
            <div class="tooltip-row d-flex justify-content-between mb-1">
                <span class="label text-secondary small">Primary Table:</span>
                <span class="value small" id="tt-table">analytics.sales</span>
            </div>
            <div class="tooltip-row d-flex justify-content-between mb-1">
                <span class="label text-secondary small">KPIs:</span>
                <span class="value small" id="tt-kpi">revenue, tickets</span>
            </div>
            <div class="tooltip-row d-flex justify-content-between mb-1">
                <span class="label text-secondary small">KPI Family:</span>
                <span class="value small text-success" id="tt-kpi-family">Revenue</span>
            </div>
            <div class="tooltip-row d-flex justify-content-between mb-1">
                <span class="label text-secondary small">Query Family:</span>
                <span class="value small text-info" id="tt-family">Daily Monitoring</span>
            </div>
            <div class="tooltip-row d-flex justify-content-between mb-1">
                <span class="label text-secondary small">Executions:</span>
                <span class="value small" id="tt-exec">312</span>
            </div>
            <div class="tooltip-row d-flex justify-content-between">
                <span class="label text-secondary small">Complexity Score:</span>
                <span class="value small text-warning" id="tt-complexity">6</span>
            </div>
        </div>
        <div class="tooltip-sql-container card-footer py-2">
            <div class="sql-label small text-uppercase text-secondary mb-1">SQL Preview</div>
            <pre id="tt-sql" class="mb-0 small bg-dark rounded p-2">SELECT * FROM ...</pre>
        </div>
    </div>

    <!-- Modal for SQL Details -->
    <!-- Modal for SQL Details -->
    <div id="modal-overlay" class="modal-overlay"> <!-- Keeping ID for established JS logic -->
        <div class="modal-content custom-scrollbar" style="max-height: 90vh; overflow-y: auto;">

            <!-- Header -->
            <div class="modal-header border-bottom border-secondary border-opacity-10 p-4">
                <div class="d-flex flex-column">
                    <h5 id="modal-title" class="modal-title fw-bold fs-4 mb-1 text-primary">
                        <i class="bi bi-code-square me-2"></i>Query Analysis
                    </h5>
                    <div id="modal-subtitle" class="small text-secondary font-monospace">METADATA INSPECTOR</div>
                </div>
                <!-- Interactive Close Button -->
                <button type="button" class="btn btn-link text-secondary p-2"
                    style="font-size: 1.5rem; text-decoration: none;" onclick="closeModal()">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>

            <div class="modal-body p-4">
                <!-- Primary Metadata Cards -->
                <div class="row g-4 mb-4">
                    <div class="col-md-4">
                        <div class="card bg-body-tertiary h-100 border-0 shadow-sm">
                            <div class="card-body text-center py-4">
                                <i class="bi bi-bar-chart-fill text-primary d-block mb-3"
                                    style="font-size:1.75rem;"></i>
                                <div class="small text-uppercase text-secondary fw-bold mb-2">Frequency</div>
                                <div id="modal-freq" class="h5 mb-0 text-primary fw-bold">High</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-body-tertiary h-100 border-0 shadow-sm">
                            <div class="card-body text-center py-4">
                                <i class="bi bi-table text-info d-block mb-3" style="font-size:1.75rem;"></i>
                                <div class="small text-uppercase text-secondary fw-bold mb-2">Primary Table</div>
                                <div id="modal-table" class="h6 mb-0 text-break fw-semibold">analytics.sales</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-body-tertiary h-100 border-0 shadow-sm">
                            <div class="card-body text-center py-4">
                                <i class="bi bi-graph-up text-success d-block mb-3" style="font-size:1.75rem;"></i>
                                <div class="small text-uppercase text-secondary fw-bold mb-2">KPIs</div>
                                <div id="modal-kpi" class="h6 mb-0 text-success fw-bold text-break">Revenue</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secondary Metadata -->
                <div class="row g-4 mb-4">
                    <div class="col-md-4">
                        <div class="p-3 bg-body-tertiary rounded text-center">
                            <div class="small text-secondary mb-1">Query Family</div>
                            <div id="modal-family" class="fw-semibold text-info">Monitoring</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="p-3 bg-body-tertiary rounded text-center">
                            <div class="small text-secondary mb-1">Executions</div>
                            <div id="modal-exec" class="fw-semibold">0</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="p-3 bg-body-tertiary rounded text-center">
                            <div class="small text-secondary mb-1">Complexity</div>
                            <div id="modal-complexity" class="fw-semibold text-warning">1</div>
                        </div>
                    </div>
                </div>

                <!-- SQL Block -->
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="small text-uppercase text-secondary fw-bold">
                        <i class="bi bi-file-code me-2"></i>SQL Structure
                    </label>
                    <span
                        class="badge bg-secondary bg-opacity-10 text-secondary border border-secondary border-opacity-25">Normalized</span>
                </div>
                <div class="position-relative">
                    <pre id="modal-sql"
                        class="sql-block p-3 rounded border border-secondary border-opacity-25 bg-body-tertiary"
                        style="font-size: 0.85rem; max-height: 300px; overflow: auto;">SELECT ...</pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>

</html>